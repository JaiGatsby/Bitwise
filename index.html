<!DOCTYPE html>
<html>

<head>
  <title>Bitwise Demo</title>
</head>

<body>

  <h1>Welcome to Our project</h1>
  <h2>Web Site Main Ingredients:</h2>

  <p>Pages (HTML)</p>
  <p>Style Sheets (CSS)</p>
  <p>Computer Code (JavaScript)</p>
  <p id ="demo"></p>
  <p id="try"> </p>
<script>

setInterval(loopy,3000);

function loopy(){
	var xmlhttp = new XMLHttpRequest();
	var url = "http://api-m2x.att.com/v2/devices/5a8e7c2809addfc40b51675cc738efae/streams/test/values";
	xmlhttp.onreadystatechange=function() {
		if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
			myFunction(xmlhttp.responseText);
		}
	}
xmlhttp.open("GET", url, true);
xmlhttp.setRequestHeader("Content-Type","application/json");
xmlhttp.setRequestHeader("X-M2X-KEY","0e37bb4007437ee8490478073123e142");

xmlhttp.send(null);
}
{

	function myFunction(response) {
    var obj = JSON.parse(response);
	
    document.getElementById("demo").innerHTML = obj.values[0].value;
	
	var rawData = ["0"];
	for	(index = 0; index < obj.values.length; index++)
	{
		rawData.push(obj.values[index].value);
	}

	document.getElementById("try").innerHTML = rawData;
}
}


/*setInterval(function(){popeye()},0);

function popeye()
{
	// read through obj.values and store in a new array
	
}*/

</script>

</body>
</html>